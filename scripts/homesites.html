<!DOCTYPE html>
<!-- <script src="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/speedhack.js"></script> -->
<html lang="en">
<head>
<script src="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/key.js"></script>
<meta name="google-site-verification" content="tEag4pLN4Q8oYMyonEzHh2Pm89memFFRUR2mjqGRuKM" />
  <meta name="description" content="Explore 30+  games and chat live with fellow gamers! Discover endless fun with new games added regularly. Join now and play your favorites!">
  <meta name="keywords" content="online games,  games, comments, multiplayer, action games, strategy games, puzzle games, gaming community, unblocked, school games">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/homestyle1.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/comments.css"> <!-- Include comments CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"> <!-- Font -->

  <!-- Random Title and H1 Script -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Predefined lists of titles and H1 content
      const titles = [
        "Asher Tupia's Games",
        "Korben Tapin's Games",
        "Clayton Rector's Games",
        "Tucker Marshall's Games",
        "Brayden C's Games",
		"Raven Sprague's Games",
		"Gavin Taylor's Games",
		"Joshua Bowman's Games",
		"Grayson Fults's Games",
		"Micheal South's Games",
		"Owen Pursel's Games",
		"Isabella Mui's Games",
		"JR's Games",
		"Mr Miller's Games"

      ];

      const h1List = [
        "Mr Miller The Science Teacher's Games | Asher Tupia's Games",
        "Mr Miller The Science Teacher's Games | Joshua Bowman's Games",
        "Kaylee Althiser's Games",
        "Mr Miller's Games | Jase Cole's Games",
        "Mr Miller The Science Teacher's Games",
		"Mr Miller's Games",
		"JR's Games",
		"Kieran's games",
		"Korben's Games",
		"Asher Tupia's games",
		"Tucker Marshall's games",
		"Jaxon Davien Googdad's Games"
      ];

      // Pick random title and h1
      const randomTitle = titles[Math.floor(Math.random() * titles.length)];
      const randomH1 = h1List[Math.floor(Math.random() * h1List.length)];

      // Set the document title
      document.title = randomTitle;

      // Update the h1 content
      const h1Element = document.querySelector("h1");
      if (h1Element) {
        h1Element.textContent = randomH1;
      }
    });
  </script>
</head>
<body>
  <h1>Mr Miller's Games | Asher Tupia's Games</h1>

  <div class="search-bar">
    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="Search | Most Games Have a speedhack, press numbers one through seven ingame." onkeyup="filterGames()">
      <img src="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/search.png" alt="Search Icon" class="search-icon">
    </div>
  </div>



<a href="https://sites.google.com/carthagecsd.org/sus/home/gamerequests" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/add.png');">
    <p class="game-title">Add Game!/Questions Form</p>
  </div>
</a>

<a href="https://sites.google.com/carthagecsd.org/sus/home/addnametolist" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/add.png');">
    <p class="game-title">Add Name To List If Site Taken Down</p>
  </div>
</a>

<div id="gamesContainer"></div>

<script>
// Formatting: {GAMEPATH}:{GAMENAME}:{THUMBNAMIL}
// The Links are autoadded by the generate boxes script. Including initial game link and initial images link.
const games = [
  "retrobowl:Retro Bowl:retrobowl.png",
  "csgoclicker:CSGO Clicker:csgoclicker.png",
  "flash-games/learntofly1:Learn To Fly 1:learntofly1.png",
  "flash-games/learntofly2:Learn To Fly 2:learntofly2.png",
  "flash-games/kawairun2:Kawai Run 2 (2P):kawairun2.png",
  "flash-games/1on1soccer:1 on 1 Soccer (2P):1on1soccer.png",
  "unity-games/fortnite:Chinese Fortnite:fortnite.png",
  "unity-games/holodisc:Holodisc AirHockey (2P):holodisc.png",
  "unity-games/triangall:Triangall (2P):triangall.png",
  "unity-games/tofight:To Fight Or Not To Fight (2P):tofight.png",
  "unity-games/bungee-go-boom:Bungee Go Boom (2P):bungee-go-boom.png",
  "unity-games/demoliton-derby:Demolition Derby:demoderby.png",
  "unity-games/ultrapong:Ultra Pong (2P):ultrapong.png",
  "unity-games/drift-hunters:Drift Hunters:drifthunters.png",
  "unity-games/clusterrush:Cluster Rush Trucks:clusterrush.png",
  "unity-games/baldis-basics:Baldi's Basics:baldi.png",
  "unity-games/bitlife:BitLife:bitlife.png",
  "unity-games/hole-io:Hole.io:holeio.png",
  "unity-games/block-blast:Block Blast:blockblast.png",
  "unity-games/rocket-league:Rocket Soccer League:rocket.png",
  "unity-games/cell-machine:Cell Machine:cellmachine.png",
  "unity-games/houseofhazards:House Of Hazards (2P):HouseOfHazards.png",
  "unity-games/block-eat-block:Block Eat Block (2P):block-eat-block.png",
  "unity-games/soccerphysics:Soccer Physics (2P):soccer_physics.png",
  "unity-games/rooftop-snipers:Rooftop Snipers (2P):rooftopsnipers.png",
  "unity-games/rooftop-snipers-2:Rooftop Snipers 2 (2P):rooftopsnipers2.png",
  "unity-games/getaway-shootout:Getaway Shootout (2P NEW MAPS 2024):getaway-shootout.png",
  "minecraft-eaglercraft:Minecraft (Eaglercraft):mc.png",
  "fluidsim:Fluid Simulator:fluidsim.png",
  "emulator/sm64:Super Mario 64(FIXED):sm64.png",
  "emulator/doom:Doom Emulator:doom.png",
  "emulator/pokemon-yellow:Pokemon Yellow:ypokemon.png",
];

// Function to generate game boxes
function generateGameBoxes() {
  const gamesContainer = document.getElementById('gamesContainer');  // Container to hold game boxes

  // Loop through each game in the games array
  games.forEach(game => {
    const [gamePath, gameName, gameThumbnail] = game.split(":");

    const gameLink = `https://sites.google.com/carthagecsd.org/sus/${gamePath}`;
    const thumbnailUrl = `https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/${gameThumbnail}`;

    // Create the game box with all elements and structure
    const gameBox = document.createElement('div');
    gameBox.classList.add('game-box');  // Add class for styling

    const gameLinkElement = document.createElement('a');
    gameLinkElement.href = gameLink;


    const boxDiv = document.createElement('div');
    boxDiv.classList.add('box');
    boxDiv.style.backgroundImage = `url(${thumbnailUrl})`;

    const gameTitle = document.createElement('p');
    gameTitle.classList.add('game-title');
    gameTitle.textContent = gameName;

    // Structure and append elements
    boxDiv.appendChild(gameTitle);
    gameLinkElement.appendChild(boxDiv);
    gameBox.appendChild(gameLinkElement);
    gamesContainer.appendChild(gameBox); // Add game box to the container
  });
}

// Call the function to generate the game boxes when the page loads
generateGameBoxes();

// Function to filter games based on the search input
function filterGames() {
  const searchInput = document.getElementById('searchInput').value.toLowerCase();  // Get search input
  const gameBoxes = document.querySelectorAll('.game-box');  // Get all the game boxes

  gameBoxes.forEach(box => {
    const gameTitle = box.querySelector('.game-title').textContent.toLowerCase();
    box.style.display = gameTitle.includes(searchInput) ? 'inline-block' : 'none';
  });
}

// Attach the filterGames function to the search input event listener
document.getElementById('searchInput').addEventListener('input', filterGames);
</script>




<div class="comments-container">
  <input type="text" id="nickname" placeholder="Enter your nickname" />
  <textarea id="commentInput" class="comment-input" placeholder="Live Chat... SAY HI NOW"></textarea>
  <button class="button-82-pushable" id="postCommentBtn">
    <span class="button-82-shadow"></span>
    <span class="button-82-edge"></span>
    <span class="button-82-front text">Send</span>
  </button>
  <div class="comments-section"></div>
</div>

<script>
// Function to fetch comments
async function fetchComments() {
    try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbyh4u3HNBYklOYU5TeNDR-J73n1qW8L6mPMJ_hzdK5ZWz_u07D-vKRhgocoOr5SwBkBrw/exec?get');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();
        
        // Check if the comments data is nested and adjust accordingly
        const comments = data.comments ? data.comments : data;

        // Ensure the result is an array
        if (!Array.isArray(comments)) {
            throw new Error('Expected an array of comments');
        }

        displayComments(comments);
    } catch (error) {
        console.error('Error fetching comments:', error);
    }
}

// Function to escape HTML
function escapeHTML(str) {
    const div = document.createElement('div');
    div.innerText = str;
    return div.innerHTML;
}

// Function to format relative time
function formatRelativeTime(date) {
    const now = new Date();
    const secondsElapsed = Math.floor((now - date) / 1000);
    
    if (secondsElapsed < 60) return `${secondsElapsed} seconds ago`;
    const minutesElapsed = Math.floor(secondsElapsed / 60);
    if (minutesElapsed < 60) return `${minutesElapsed} minutes ago`;
    const hoursElapsed = Math.floor(minutesElapsed / 60);
    if (hoursElapsed < 24) return `${hoursElapsed} hours ago`;
    const daysElapsed = Math.floor(hoursElapsed / 24);
    if (daysElapsed < 7) return `${daysElapsed} days ago`;
    const weeksElapsed = Math.floor(daysElapsed / 7);
    if (weeksElapsed < 4) return `${weeksElapsed} weeks ago`;
    const monthsElapsed = Math.floor(daysElapsed / 30);
    if (monthsElapsed < 12) return `${monthsElapsed} months ago`;
    const yearsElapsed = Math.floor(daysElapsed / 365);
    return `${yearsElapsed} years ago`;
}

// Function to display comments
function displayComments(comments) {
    const commentsSection = document.querySelector('.comments-section');
    commentsSection.innerHTML = ''; // Clear previous comments
    const userIdLocalStorage = "test22";

    // Array of profile picture URLs
    const profilePics = [
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp2.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp3.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp4.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/pfp1.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/pfp2.gif'
    ];

    // Array of crown placeholder cookies
    const crownCookies = [
        'z',
        'z'
    ];

    comments.forEach(comment => {
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment';

        // Select a random profile picture from the array
        const profilePic = document.createElement('img');
        const randomIndex = Math.floor(Math.random() * profilePics.length);
        profilePic.src = profilePics[randomIndex];
        profilePic.className = 'profile-pic';

        const commentText = document.createElement('span');
        commentText.className = 'comment-text';
        commentText.innerHTML = `<strong class="nickname">${escapeHTML(comment.nickname)}</strong>: ${escapeHTML(comment.text)}`;

        // Add timestamp with created_at and relative time
        const timestamp = document.createElement('span');
        timestamp.className = 'timestamp';
        const createdAt = new Date(comment.created_at);
        const relativeTime = formatRelativeTime(createdAt);
        timestamp.innerHTML = ` - <span style="color: black; font-weight: bold;">${createdAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true })} (${relativeTime})</span>`;

        // Check if the comment's cookie matches one of the crown placeholder cookies
        if (crownCookies.includes(comment.cookie)) {
            const crownIcon = document.createElement('img');
            crownIcon.src = 'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/crown.png';
            crownIcon.className = 'crown-icon';
            crownIcon.alt = 'Crown Icon';
            commentDiv.appendChild(crownIcon);
        }

        commentDiv.appendChild(profilePic);
        commentDiv.appendChild(commentText);
        commentDiv.appendChild(timestamp);
        commentsSection.appendChild(commentDiv);
    });
}

// Fetch comments on page load
window.onload = () => {
    fetchComments(); // Initial fetch
    setInterval(fetchComments, 19000);
};

// Handle posting comments
document.getElementById('postCommentBtn').onclick = async function() {
    const nickname = localStorage.getItem('nickname') || document.getElementById('nickname').value.trim();
    const text = document.getElementById('commentInput').value.trim();
    const userId = localStorage.getItem('nickname') || document.getElementById('nickname').value.trim();

    if (!localStorage.getItem('nickname') && nickname) {
        localStorage.setItem('nickname', nickname);
        document.getElementById('nickname').disabled = true;
    }

    if (text) {
        const response = await fetch(`https://script.google.com/macros/s/AKfycbyh4u3HNBYklOYU5TeNDR-J73n1qW8L6mPMJ_hzdK5ZWz_u07D-vKRhgocoOr5SwBkBrw/exec?post&nickname=${encodeURIComponent(nickname)}&text=${encodeURIComponent(text)}&cookie="test00111111"`, {
            headers: {
                'Content-Type': 'text/plain;charset=utf-8',
            },
        });

        if (response.ok) {
            document.getElementById('commentInput').value = '';
            fetchComments();
        } else {
            const errorMessage = await response.text();
            alert(`Error posting comment: ${errorMessage}`);
        }
    } else {
        alert('Please enter a comment.');
    }
};
</script>

<style>
/* Base button styles */
.button-82-pushable {
  background-color: #007bff; /* Blue color */
  color: white; /* White text */
  border: none; /* No border */
  border-radius: 25px; /* Rounded corners */
  padding: 12px 24px; /* Padding for size */
  font-size: 16px; /* Font size */
  cursor: pointer; /* Cursor to pointer on hover */
  text-align: center;
  transition: all 0.3s ease; /* Smooth transitions */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Shadow behind the button */
  position: relative; /* For positioning the checkmark */
}

/* Hover effect */
.button-82-pushable:hover {
  background-color: #0056b3; /* Darker blue on hover */
  transform: scale(1.05); /* Slight expansion on hover */
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); /* Darker shadow */
}

/* Pressed state (active) */
.button-82-pushable:active {
  transform: scale(0.95); /* Slight shrink when pressed */
  background-color: #00408b; /* Even darker blue */
  box-shadow: none; /* Remove shadow when pressed */
}

/* Add checkmark inside the button */
.button-82-pushable .checkmark {
  display: none; /* Hidden by default */
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 20px; /* Checkmark size */
  color: white;
  animation: fadeInOut 1s ease forwards; /* Animation for checkmark */
}

/* Checkmark appearance and disappearance animation */
@keyframes fadeInOut {
  0% {
    opacity: 0;
    transform: scale(0);
  }
  30% {
    opacity: 1;
    transform: scale(1);
  }
  70% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0);
  }
}

/* When the button is in its 'processing' state */
.button-82-pushable.processing {
  opacity: 0; /* Fading out the button */
  pointer-events: none; /* Disable interaction during processing */
}

/* Styling for the text when fading */
.button-82-pushable.processing-text {
  opacity: 0; /* Text fade */
}


/* Styling for the nickname input field */
#nickname {
  width: 100%; /* Full width */
  padding: 12px; /* Padding inside the input */
  font-size: 16px; /* Font size */
  border-radius: 25px; /* Rounded corners */
  border: 2px solid #ccc; /* Light grey border */
  background-color: #f9f9f9; /* Light background color */
  color: #333; /* Dark text color */
  outline: none; /* Remove default outline on focus */
  transition: all 0.3s ease; /* Smooth transitions for focus and hover */
  box-sizing: border-box; /* Include padding and border in the width */
}

/* Focus state */
#nickname:focus {
  border-color: #007bff; /* Blue border on focus */
  background-color: #fff; /* White background on focus */
  box-shadow: 0 0 8px rgba(0, 123, 255, 0.5); /* Light blue shadow on focus */
}

/* Placeholder text styling */
#nickname::placeholder {
  color: #aaa; /* Grey placeholder text */
  font-style: italic; /* Italicize placeholder */
}

/* Optional: when the input is disabled */
#nickname:disabled {
  background-color: #e0e0e0; /* Grey background when disabled */
  border-color: #bbb; /* Lighter border */
}



</style>
 

</body>
</html>