<!DOCTYPE html>
<!-- <script src="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/speedhack.js"></script> -->
<html lang="en">
<head>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const overlay = document.getElementById("overlay");
  const gameFrame = document.getElementById("gameFrame");
  const fullscreenBtn = document.getElementById("fullscreenBtn");
  const closeBtn = document.getElementById("closeBtn");
  const content = document.getElementById("content");

  // Open game when box clicked
  document.querySelectorAll(".box").forEach(box => {
    box.addEventListener("click", async () => {
      const url = box.dataset.url;
      try {
        const res = await fetch(url);
        const html = await res.text();
        const blob = new Blob([html], { type: "text/html" });
        const blobUrl = URL.createObjectURL(blob);

        gameFrame.src = blobUrl;
        content.classList.add("blurred");
        overlay.style.display = "flex";
      } catch (err) {
        console.error("Failed to load game:", err);
      }
    });
  });

  // Fullscreen toggle
  fullscreenBtn.addEventListener("click", () => {
    if (overlay.style.top === "0%") {
      overlay.style.top = "10%";
      overlay.style.left = "10%";
      overlay.style.width = "80%";
      overlay.style.height = "80%";
    } else {
      overlay.style.top = "0%";
      overlay.style.left = "0%";
      overlay.style.width = "100%";
      overlay.style.height = "100%";
    }
  });

  // Close overlay
  closeBtn.addEventListener("click", () => {
    overlay.style.display = "none";
    content.classList.remove("blurred");
    gameFrame.src = ""; // unload game
  });

  // Reset overlay on load
  overlay.style.display = "none";
  content.classList.remove("blurred");
  gameFrame.src = "";
});
</script>

<!-- <script src="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/key.js"></script> -->
  <meta name="description" content="Explore 30+  games and chat live with fellow gamers! Discover endless fun with new games added regularly. Join now and play your favorites!">
  <meta name="keywords" content="online games,  games, comments, multiplayer, action games, strategy games, puzzle games, gaming community, school games">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/homestyle4.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/comments.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/shareModal1.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/counter.css"><!-- Include comments CSS -->
  <script src="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon@main/scripts/4-11-com.js" defer></script>

  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"> <!-- Font -->
  <!-- Random Title and H1 Script -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Predefined lists of titles and H1 content
      const titles = [
        "His Games",
        "jr Games"

      ];

      const h1List = [
		  "You Know Who's Games",
		  "jr games",
      ];

      // Pick random title and h1
      const randomTitle = titles[Math.floor(Math.random() * titles.length)];
      const randomH1 = h1List[Math.floor(Math.random() * h1List.length)];

      // Set the document title
      document.title = randomTitle;

      // Update the h1 content
      const h1Element = document.querySelector("h1");
      if (h1Element) {
        h1Element.textContent = randomH1;
      }
    });
  </script>


<script>


document.addEventListener("DOMContentLoaded", async function () {
    const warnsUrl = "https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/warns.txt";
    const warnHtmlUrl = "https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/1warn.html";
    const userCookie = localStorage.getItem("analytics_sidentifier");
    if (!userCookie) return;

    // Load acknowledged IDs
    const acknowledged = localStorage.getItem("acknowledge");
    const acknowledgedList = acknowledged ? acknowledged.split(",") : [];

    try {
        // Fetch warns.txt
        const response = await fetch(warnsUrl, { cache: "no-store" });
        if (!response.ok) throw new Error("Failed to fetch warns list");

        const text = await response.text();
        const lines = text.split("\n").map(line => line.trim()).filter(Boolean);

        // Collect all warn IDs for this cookie
        const userWarns = [];
        for (const line of lines) {
            const [cookie, reason, warnId] = line.split("|");
            if (cookie && warnId && cookie.trim() === userCookie) {
                userWarns.push(warnId.trim());
            }
        }

        // Find if thereâ€™s any unacknowledged warn
        const unacknowledged = userWarns.filter(id => !acknowledgedList.includes(id));

        if (unacknowledged.length > 0) {
            // Fetch warn.html raw content
            const htmlResponse = await fetch(warnHtmlUrl, { cache: "no-store" });
            if (!htmlResponse.ok) throw new Error("Failed to fetch warn.html");

            const warnHtml = await htmlResponse.text();

            // Create top iframe
            const iframe = document.createElement("iframe");
            iframe.style.position = "fixed";
            iframe.style.top = "0";
            iframe.style.left = "0";
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.zIndex = "999999";
            iframe.style.border = "none";

            // Write warn.html content into iframe
            document.body.appendChild(iframe);
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            iframeDoc.open();
            iframeDoc.write(warnHtml);
            iframeDoc.close();
        }
    } catch (err) {
        console.error("Error handling warns:", err);
    }
});

</script>


</head>


<body>

  <script>
  
// Fetch comments from Google Apps Script
async function fetchComments() {
    try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbyh4u3HNBYklOYU5TeNDR-J73n1qW8L6mPMJ_hzdK5ZWz_u07D-vKRhgocoOr5SwBkBrw/exec?get');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        const comments = Array.isArray(data.comments) ? data.comments : data;
        displayComments(comments);
    } catch (error) {
        console.error('Error fetching comments:', error);
    }
}

// Escape HTML for safety
function escapeHTML(str) {
    const div = document.createElement('div');
    div.innerText = str;
    return div.innerHTML;
}

// Format timestamp
function formatRelativeTime(date) {
    const now = new Date();
    const seconds = Math.floor((now - date) / 1000);
    if (seconds < 60) return `${seconds} seconds ago`;
    const minutes = Math.floor(seconds / 60);
    if (minutes < 60) return `${minutes} minutes ago`;
    const hours = Math.floor(minutes / 60);
    if (hours < 24) return `${hours} hours ago`;
    const days = Math.floor(hours / 24);
    if (days < 7) return `${days} days ago`;
    const weeks = Math.floor(days / 7);
    if (weeks < 4) return `${weeks} weeks ago`;
    const months = Math.floor(days / 30);
    if (months < 12) return `${months} months ago`;
    return `${Math.floor(days / 365)} years ago`;
}

// Render comments
function displayComments(comments) {
    const commentsSection = document.querySelector('.comments-section');
    commentsSection.innerHTML = '';

    const profilePics = [
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp2.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp3.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/pfp4.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/pfp1.png',
        'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/pfp2.gif'
    ];

    const crownCookies = ['z', 'z', '945ba64a-e2ac-4317-9488-6463c6625b02']; // privileged cookies
    const myCookie = localStorage.getItem('analytics_sidentifier') || '';

    function getProfilePic(username) {
        if (!username) return profilePics[0];
        const firstChar = username.charAt(0).toLowerCase();
        if ('abcd'.includes(firstChar)) return profilePics[0];
        if ('efgh'.includes(firstChar)) return profilePics[1];
        if ('ijkl'.includes(firstChar)) return profilePics[2];
        if ('mnop'.includes(firstChar)) return profilePics[3];
        if ('qrst'.includes(firstChar)) return profilePics[4];
        return profilePics[5]; // uvwxyz or anything else
    }

    comments.forEach(comment => {
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment';

        // profile pic based on username
        const profilePic = document.createElement('img');
        profilePic.src = getProfilePic(comment.nickname || '');
        profilePic.className = 'profile-pic';

        const commentText = document.createElement('span');
        commentText.className = 'comment-text';
        commentText.innerHTML = `<strong class="nickname">${escapeHTML(comment.nickname)}</strong>: ${escapeHTML(comment.text)}`;

        const timestamp = document.createElement('span');
        timestamp.className = 'timestamp';
        const createdAt = new Date(comment.created_at);
        timestamp.innerHTML = ` - <span style="color: black; font-weight: bold;">${createdAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true })} (${formatRelativeTime(createdAt)})</span>`;

        // Crown icon for privileged users
        if (crownCookies.includes(comment.cookie)) {
            const crownIcon = document.createElement('img');
            crownIcon.src = 'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/scripts/crown.png';
            crownIcon.className = 'crown-icon';
            crownIcon.alt = 'Crown Icon';
            commentDiv.appendChild(crownIcon);
        }

        // Delete button if *my* cookie is privileged
        if (crownCookies.includes(myCookie)) {
            const deleteBtn = document.createElement('img');
            deleteBtn.src = 'https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/trash.png';
            deleteBtn.className = 'delete-btn';
            deleteBtn.title = 'Delete comment';
            deleteBtn.style.cssText = 'position:absolute; top:5px; right:5px; width:16px; height:16px; cursor:pointer;';

            deleteBtn.onclick = () => {
                postComment(`j_delete ${comment.comment_id}`);
            };

            commentDiv.style.position = 'relative'; // so delete button positions correctly
            commentDiv.appendChild(deleteBtn);
        }

        commentDiv.appendChild(profilePic);
        commentDiv.appendChild(commentText);
        commentDiv.appendChild(timestamp);
        commentsSection.appendChild(commentDiv);
    });
}
// THIS BELOW IS ONLY FOR COMMANDS SHOULD BE
function postComment(text) {
    const nickname = localStorage.getItem('nickname') || 'BOT';
    const userKey = localStorage.getItem('analytics_sidentifier') || '';
    const resolution = `${window.innerWidth}x${window.innerHeight}`;

    const queryParams = new URLSearchParams({
        post: '',
        nickname: nickname,
        text: text,
        cookie: userKey,
        userid: userKey,
        browser_resolution: resolution
    });

    const url = `https://script.google.com/macros/s/AKfycbyh4u3HNBYklOYU5TeNDR-J73n1qW8L6mPMJ_hzdK5ZWz_u07D-vKRhgocoOr5SwBkBrw/exec?${queryParams.toString()}`;

    fetch(url, {
        method: 'GET',
        headers: { 'Content-Type': 'text/plain;charset=utf-8' }
    }).then(() => fetchComments());
}
// END



// Post a comment
document.getElementById('postCommentBtn').onclick = async function () {
    const btn = this;
    btn.disabled = true;
    setTimeout(() => btn.disabled = false, 5000);

    const nicknameField = document.getElementById('nickname');
    const commentField = document.getElementById('commentInput');

    let nickname = nicknameField.value.trim();
	localStorage.setItem("new_nickname", nickname);
    let text = commentField.value.trim();
    const userKey = localStorage.getItem('analytics_sidentifier') || '';
    const userId = userKey;
    const resolution = `${window.innerWidth}x${window.innerHeight}`;
	localStorage.setItem("new_resolution", resolution);

    const banned_text = {
        "nigg": "[n]",
        "nicker": "[nick]",
        "nick gur": "[n name]",
		"faggo": "[fa]",
		"bitch": "[b]",
		"fuck": "[fc]",
		"ass": "[a]",
		"puss": "[p]",
		"dick": "[d]",
		"penis": "[peni]",
		"retar": "[r]"
    };

    // Function to replace banned words
    function applyReplacements(input) {
        let modified = input;
        let replaced = false;

        for (const [badWord, replacement] of Object.entries(banned_text)) {
            const regex = new RegExp(`\\b${badWord}\\b`, "gi");
            if (regex.test(modified)) {
                modified = modified.replace(regex, replacement);
                replaced = true;
            }
        }

        if (replaced) {
            let warns = parseInt(localStorage.getItem("comment_warns") || "0", 10);
            warns++;
            localStorage.setItem("comment_warns", warns);

            // Placeholder action when warns reach 3
            if (warns >= 3) {
                const botMessage = `A user just got banned for too many swear words, their cookie is ${userKey}`;

                const queryParams = new URLSearchParams({
                    post: '',
                    nickname: "BOT:",
                    text: botMessage,
                    cookie: "z",     // Bot's cookie
                    userid: "z",
                    browser_resolution: resolution
                });

                const url = `https://script.google.com/macros/s/AKfycbyh4u3HNBYklOYU5TeNDR-J73n1qW8L6mPMJ_hzdK5ZWz_u07D-vKRhgocoOr5SwBkBrw/exec?${queryParams.toString()}`;

                fetch(url, {
                    method: 'GET',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' }
                });

                alert("You have been banned for too many swear words.");
                return null; // stop posting original comment
            }
        }

        return modified;
    }

    // Apply to nickname and comment text
    nickname = applyReplacements(nickname);
    text = applyReplacements(text);

    if (nickname === null || text === null) {
        return; // blocked due to ban
    }

    if (nickname.length > 20) {
        nicknameField.value = 'Your name is too long...............................';
        commentField.value = '';
        return;
    }


    if (!localStorage.getItem('nickname') && nickname) {
        localStorage.setItem('nickname', nickname);
        nicknameField.disabled = true;
    }

    if (text) {
        const queryParams = new URLSearchParams({
            post: '',
            nickname: nickname,
            text: text,
            cookie: userKey,
            userid: userId,
            browser_resolution: resolution
        });

        const url = `https://script.google.com/macros/s/AKfycbyh4u3HNBYklOYU5TeNDR-J73n1qW8L6mPMJ_hzdK5ZWz_u07D-vKRhgocoOr5SwBkBrw/exec?${queryParams.toString()}`;

        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'text/plain;charset=utf-8',
            },
        });

        if (response.ok) {
            commentField.value = '';
            fetchComments();
        } else {
            const errorText = await response.text();
            alert(`Error posting comment: ${errorText}`);
        }
    } else {
        alert('Please enter a comment.');
    }
};

// Initial load
window.onload = () => {
    fetchComments();
    setInterval(fetchComments, 19000);
};
  
  </script>


	<script type="text/javascript" id="home-<?= REF ?>" src="https://cdn.jsdelivr.net/gh/beak2825/special-bassoon/scripts/allpages10.js"></script>
  <h1>Mr Miller's Games</h1>


  <div class="search-bar">
    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="Search | Most Games Have a speedhack, press numbers one through seven ingame." onkeyup="filterGames()">
      <img src="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/search.png" alt="Search Icon" class="search-icon">
    </div>
  </div>




<div class="box share-box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/share.png'); cursor:pointer;">
  <p class="game-title">Send to Others</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/videotest.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/anonymous.png');">
  <p class="game-title">How I did it all</p>
</div>

<div id="shareModal">
  <div class="modalContent">
    <h2 style="color: black;">Share Game</h2>
    <label style="color: black;">
      Your Email:
      <input type="text" id="yourEmail" placeholder="example: 28jsmith">
    </label>
    <label style="color: black;">
      Sending To:
      <input type="text" id="sendingTo" placeholder="example: 28tsmith">
    </label>
    <div class="modalButtons">
      <button id="shareBtn">Share</button>
      <button id="closeModal">Cancel</button>
    </div>
  </div>
</div>


<style>
  /* Modal overlay */
  #shareModal {
    display: none;
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.4);
    z-index: 10000;
    justify-content: center;
    align-items: center;
  }

  .modalContent {
    background: #fff;
    padding: 20px 25px;
    border-radius: 12px;
    width: 300px;
    max-width: 90%;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    gap: 12px;
    font-family: sans-serif;
  }

  .modalContent h2 {
    margin: 0 0 10px 0;
    text-align: center;
  }

  .modalContent label {
    display: flex;
    flex-direction: column;
    font-size: 14px;
  }

  .modalContent input {
    padding: 6px 10px;
    margin-top: 4px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
  }

  .modalButtons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 10px;
  }

  #shareBtn {
    background: #1a73e8;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }

  #shareBtn:hover {
    background: #1558b0;
  }

  #closeModal {
    background: #eee;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
  }

  #closeModal:hover {
    background: #ccc;
  }
</style>

<div id="content">


<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/1v1/loader.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/1v1.png');">
  <p class="game-title">1v1.lol</p>
</div>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=drift-hunters" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/drift-hunters.png');">
    <p class="game-title">Drift Hunters FIXED</p>
  </div>
</a>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=slope" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/slope.png');">
    <p class="game-title">Slope</p>
  </div>
</a>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/nut-simulator/game.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/nut.png');">
  <p class="game-title">Nut Simulator</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/rooftop-snipers/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/rooftopsnipers.png');">
  <p class="game-title">Rooftop Snipers</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/getaway-shootout/__index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/getaway-shootout.png');">
  <p class="game-title">Getaway Shootout</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/volleyrandom/index_load.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/volleyrandom.png');">
  <p class="game-title">Volley Random</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/basketrandom/index_load.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/basketrandom.png');">
  <p class="game-title">Basket Random</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/soccerphysics/2index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/soccer_physics.png');">
  <p class="game-title">Soccer Physics</p>
</div>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=houseofhazards" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/HouseOfHazards.png');">
    <p class="game-title">House of Hazards FIXED</p>
  </div>
</a>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/subway-surfers-unity/indexload.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/subway.png');">
  <p class="game-title">Subway Surfers</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/retrobowl/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/retrobowl.png');">
  <p class="game-title">RetroBowl FIXED</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/flashgames/1on1soccer.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/1on1soccer.png');">
  <p class="game-title">1 on 1 Soccer</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/ultrapong/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/ultrapong.png');">
  <p class="game-title">Ultra Pong</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/emulator/1ypokemon.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/ypokemon.png');">
  <p class="game-title">Yellow Pokemon FIXED</p>
</div>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=sm64" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/sm64.png');">
    <p class="game-title">SM64</p>
  </div>
</a>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/mc/loader.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/mc.png');">
  <p class="game-title">EaglerCraft FIXED</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/rocket-league/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/rocket.png');">
  <p class="game-title">Rocket Soccer Derby</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/baldi/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/baldi.png');">
  <p class="game-title">Running from Wyatt Newton</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/bitlife/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/bitlife.png');">
  <p class="game-title">Bitlife</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/blockblast/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/blockblast.png');">
  <p class="game-title">Block Blast</p>
</div>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=bungee-go-boom" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/bungee-go-boom.png');">
    <p class="game-title">Bungee Go Boom</p>
  </div>
</a>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/clusterrush/index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/cluster-rush.png');">
  <p class="game-title">Cluster Rush</p>
</div>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/csgoclicker/1index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/csgoclicker.png');">
  <p class="game-title">CSGO Clicker</p>
</div>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=demolition-derby" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/demolition-derby.png');">
    <p class="game-title">Demolition Derby</p>
  </div>
</a>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=kawairun2" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/kawairun2.png');">
    <p class="game-title">Kawai Run 2</p>
  </div>
</a>

<div class="box" 
      data-url="https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/block-eat/____index.html" 
      style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/block-eat-block.png');">
  <p class="game-title">Block Eat Block</p>
</div>

<a href="https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?page=cellmachine" target="_blank">
  <div class="box" style="background-image: url('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/images/cellmachine.png');">
    <p class="game-title">Cell Machine</p>
  </div>
</a>

</div>


<script>

  const shareBox = document.querySelector(".share-box");
  const modal = document.getElementById("shareModal");
  const closeBtn = document.getElementById("closeModal");
  const shareBtn = document.getElementById("shareBtn");
  const userKey = localStorage.getItem('analytics_sidentifier') || '';
  shareBox.addEventListener("click", () => modal.style.display = "flex");
  closeBtn.addEventListener("click", () => modal.style.display = "none");

  shareBtn.addEventListener("click", () => {
    const yourEmail = document.getElementById("yourEmail").value.trim();
    const sendingTo = document.getElementById("sendingTo").value.trim();

    if (!sendingTo) {
      alert("Please fill the 'Sending To' field.");
      return;
    }

    const baseUrl = "https://mail.google.com/mail/?view=cm&fs=1";
    const subject = encodeURIComponent("game site");
    const body = encodeURIComponent(
      "the new game site is https://script.google.com/macros/s/AKfycbyAWMq0wM0E1MaxRZd1yZ3sdesJ7HORSqUL1xSngz-PiDGk3JNdQqMdUrFXpt14suw64g/exec?ref=" 
      + encodeURIComponent(yourEmail) + '-' + encodeURIComponent(sendingTo) + encodeURIComponent(userKey)
    );
    
    const mailUrl = `${baseUrl}&to=&su=${subject}&body=${body}&tf=1`;
    
    window.open(mailUrl, "_blank");
    modal.style.display = "none";
  });

</script>

  <div id="overlay">
    <iframe id="gameFrame"></iframe>
    <div id="controlBar">
      <button id="fullscreenBtn">â›¶</button>
      <button id="closeBtn">âœ–</button>
    </div>
  </div>

<script>
(function() {
    const apiUrl = "https://script.google.com/macros/s/AKfycbzrdGnkXaoyv-vEg6ZSaorWXNuIAZgMTxh_ZiRGalhs_UXvMJYsNNoA83xSDDg42BNj/exec";

    // Wait until the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", () => {
        const onlineEl = document.getElementById("onlineUsers");
        const totalEl = document.getElementById("totalUsers");

        async function updateCounter() {
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error("Failed to fetch counter JSON");
                const data = await response.json();

                onlineEl.textContent = data.online ?? 0;
                totalEl.textContent = data.total_users ?? 0;
            } catch (err) {
                console.error("Error fetching counter:", err);
            }
        }

        // Initial fetch
        updateCounter();

        // Refresh every 30 seconds
        setInterval(updateCounter, 100000);
    });
})();

</script>


<script>


(function() {
  const sidentifier = localStorage.getItem('analytics_sidentifier');
  const warns = parseInt(localStorage.getItem('comment_warns') || "0", 10);

  // Helper: inject blocked.html with a reason
  function injectBlocked(reason) {
    const iframe = document.createElement('iframe');
    Object.assign(iframe.style, {
      position: 'fixed',
      top: '0',
      left: '0',
      width: '100%',
      height: '100%',
      border: 'none',
      margin: '0',
      padding: '0',
      zIndex: '9999999',
      background: '#fff'
    });
    document.body.appendChild(iframe);

    fetch('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/blocked.html')
      .then(res => res.text())
      .then(html => {
        const htmlWithReason = html.replace(/afaf/g, reason);
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        doc.open();
        doc.write(htmlWithReason);
        doc.close();
      })
      .catch(err => {
        console.error("Failed to load blocked content:", err);
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        doc.open();
        doc.write(`<div style="display:flex;justify-content:center;align-items:center;height:100%;font-family:sans-serif;font-size:24px;">
                     ${reason}
                   </div>`);
        doc.close();
      });
  }

  // First: local warns check
  if (warns >= 3) {
    injectBlocked("You have been banned due to too many warnings.");
    return; // stop further checks
  }

  if (!sidentifier) return; // no identifier, do nothing

  // Second: external bans.txt check
  fetch('https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/bans.txt')
    .then(res => res.text())
    .then(text => {
      const blockedList = {};
      text.split(/\r?\n/).forEach(line => {
        const [id, reason] = line.split('|').map(s => s.trim());
        if (id) blockedList[id] = reason || "Blocked.";
      });

      if (blockedList[sidentifier]) {
        injectBlocked(blockedList[sidentifier]);
      }
    })
    .catch(err => console.error("Failed to fetch bans.txt:", err));
})();



</script>


<script>

(function() {
  let buffer = [];

  document.addEventListener("keydown", async (e) => {
    const key = e.key.toLowerCase();

    // Track last 10 keys
    buffer.push(key);
    if (buffer.length > 10) buffer.shift();

    // Check for trigger (10x 'l' or 10x 'q')
    if (buffer.join("") === "llllllllll" || buffer.join("") === "qqqqqqqqqq") {
      try {
        const res = await fetch("https://raw.githubusercontent.com/beak2825/special-bassoon/refs/heads/main/blocked.html");
        const html = await res.text();

        const overlay = document.createElement("div");
        Object.assign(overlay.style, {
          position: "fixed",
          top: "0",
          left: "0",
          width: "100%",
          height: "100%",
          background: "#fff",
          zIndex: "999999",
          overflow: "auto"
        });
        overlay.innerHTML = html;
        document.body.innerHTML = ""; // clear page
        document.body.appendChild(overlay);
      } catch (err) {
        console.error("Failed to fetch blocked.html:", err);
      }
      buffer = []; // reset after trigger
    }
  });
})();

</script>

<div id="onlineCounter">
  Online: <span id="onlineUsers">...</span><br>
  Total Visitors: <span id="totalUsers">...</span>
</div>

<div id="s-identifier-ui" class="s-identifier-ui"></div>

<div class="comments-container">
  <input type="text" id="nickname" placeholder="Enter your nickname" />
  <textarea id="commentInput" class="comment-input" placeholder="Live Chat... SAY HI NOW"></textarea>
  <button class="button-82-pushable" id="postCommentBtn">
    <span class="button-82-shadow"></span>
    <span class="button-82-edge"></span>
    <span class="button-82-front text">Send</span>
  </button>
  <div class="comments-section"></div>
</div>

</body>
</html>